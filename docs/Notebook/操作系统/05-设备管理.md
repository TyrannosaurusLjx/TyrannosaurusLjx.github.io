# 设备管理
## I/O 设备的基本概念和分类
- 按特性分类
  - 人机交互类
    - 鼠标,键盘,打印机
      - 数据传输速度慢
  - 存储设备
    - 移动硬盘
      - 数据传输速度快
  - 网络通信设备
    - 路由器
      - 介于前两者之间
- 按传输速率分类
  - 低速设备
    - 键盘,鼠标
  - 中速设备
    - 打印机
  - 高速设备
    - 硬盘,网卡
- 按信息交换单位分类
  - 块设备
    - 硬盘
  - 字符设备
    - 键盘,鼠标

## I/O控制器
- I/O 控制器的功能
  - 接受识别 cpu 的命令
    - 控制寄存器放置 cpu 传达的命令
  - 向 cpu 报告命令状态
    - 状态寄存器放置 I/O 设备的状态
  - 数据交换
    - 数据寄存器用于暂存数据
  - 地址识别
    - 实现 cpu 和各种寄存器之间的交互

- I/O 控制器的组成
  - cpu 和控制器的接口
    - 实现 cpu 和控制器的通信
  - I/O 逻辑
    - 负责接收并识别 cpu 的命令,并对设备发出命令
  - 控制器和设备的接口
    - 实现控制器和设备的通信

![I/O 控制器](img/image-14.png)

## I/O控制方式
- 程序直接控制方式
  - ![程序直接控制](img/image-15.png)
  - cpu 需要不断轮询检查设备状态
  - 每次读一个字
  - 优点:实现简单,缺点:cpu 和 I/O 设备只能串行工作,效率低
- 中断驱动方式
  - ![中断驱动方式](img/image-16.png)
  - 引入中断机制,在 I/O 设备操作的时候 cpu 可以做别的事情,当 I/O 设备完成操作后,直接唤醒等待 I/O 的进程
  - 优点:提高了效率,缺点:每次只能传一个字,当数据太多的时候需要很多的中断,也会影响效率
- DMA 方式
  - (直接存储器存取:Direct Memory Access) 
    - 数据传送单位是:块
    - 数据流向不需要经过:cpu
    - cpu 干预:只需要在开始和结束时干预
  - ![DMA](img/image-17.png)
  - 仅在开始和结束时 cpu 参与,中间的数据传输不需要 cpu 参与
  - 优点:提高了效率(块为单位),缺点:cpu 每次发出一个 I/O 指令,只能读写一个或者多个**连续**的数据块,读写离散数据时需要发多个 I/O 指令
- 通道控制方式
  - 通道:一种硬件,可以识别一系列的通道指令
  - ![通道控制方式](img/image-18.png)
  - 优点:cpu,通道,I/O 设备可以并行工作,效率高.缺点:实现复杂,需要专门的硬件支持
- ![总结](img/image-19.png)

## I/O软件层次结构



















