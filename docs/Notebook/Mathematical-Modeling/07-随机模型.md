# 随机模型

## 疾病检测
- 记事件$A$为患病,事件$B$为检测结果为阳性
  - 灵敏度(sensitivity):$p:=P(B|A)$,为真阳性率
  - 特异度(specificity):$q:=P(\bar{B}|\bar{A})$,为真阴性率
  - 发病率为$r$
    - 一般来说,$p,q$都接近于$1$,不然这个检测方法就没什么用
    - 这里设$r = 0.005,p=0.95,q = 0.99$
- 一个人没有患病,检测为阴性的结构为 0.99,也就是说,阴性误检的概率为0.01,很小.那么,一个人检测为阳性,真的患病的概率是多少呢?(只需计算$P(A|B)$即可)
  - $P(A|B)=\frac{P(B|A)P(A)}{P(B)}=\frac{P(B|A)P(A)}{P(B|A)P(A)+ P(B|\bar{A}P(\bar{A}))}=\frac{pr}{pr+(1-q)(1-r)}\approx 0.323$
  - 也就是说,即使检测结果为阳性,但是真的患病的概率只有$32.3\%$,这个概率还是比较低的
  - 并且相对于$p$,结果受$q$的影响变化更剧烈(原因在于(1-r)相对大),所以如果一个检测方法相对容易出现假阳性,那么这个检测方法就不太靠谱

## 概率群试
- 矩阵检测方案:将$m\times n$个人排成$m$行$n$列
  - 1. 检测每一行,如果阴性,则该行所有人都是阴性,否则一个一个检测.
  - 2. 或者检测每一行和每一列,通过结果确定感染者的位置
    - 这种方法不一定能完全确定感染者的位置,但是可以大大减少检测次数,例如矩阵 $\begin{pmatrix}
      0 & 1 & 0 \\
      1 & 0 &1  \\
      0 & 1 & 0 
    \end{pmatrix}$,其中$1$表示感染者,$0$表示健康的人

- 二分检测方案:先整体检测,若阴则结束,不然均分为两部分,如此直到结束
- 三阶段检测方案:二分两次,再逐个检测

## Monty Hall问题
- 舞台上有三扇道具门，其中一扇门后置有一辆汽车，另两扇门后各置有一头山羊。竞猜者可任选其中一扇门并获赠门后物品。当竞猜者选择了其中一扇门后，主持人打开了另两扇门中的一扇，门后面是一头山羊。
    - 主持人知道汽车所在位置。他打开的门既不是竞猜者选择的，也不是后置汽车的。若有两扇门符合以上要求，他以相同概率选择其中一扇
    - 主持人允许竞猜者改变之前的选择，竞猜者为增加获得汽车的可能性，是否应该改变当前的选择？
- 不妨设竞猜者初次选择 1 号门
  - 记 $C_i$ 为事件“汽车位于 $i$ 号门后",$P\left(C_1\right)=P\left(C_2\right)=P\left(C_3\right)=\frac{1}{3}$
  - 假设主持人打开2号门。记 $M$ 为事件 “主持人打开2号门"
  - $P\left(M \mid C_1\right)=\frac{1}{2}, P\left(M \mid C_2\right)=0, P\left(M \mid C_3\right)=1$
  - 若竞猜者不改变选择，获得汽车的概率为 $$P\left(C_1 \mid M\right)=\frac{P\left(M \mid C_1\right) P\left(C_1\right)}{P\left(M \mid C_1\right) P\left(C_1\right)+P\left(M \mid C_2\right) P\left(C_2\right)+P\left(M \mid C_3\right) P\left(C_3\right)}=\frac{\frac{1}{2} \cdot \frac{1}{3}}{\frac{1}{2} \cdot \frac{1}{3}+0 \cdot \frac{1}{3}+1 \cdot \frac{1}{3}}=\frac{1}{3}$$
  - 
  - 若竞猜者改变选择，选择3号门，获得汽车的概率为 $$P\left(C_3 \mid M\right)=\frac{P(M|C_3)P(C_3)}{P\left(M \mid C_1\right) P\left(C_1\right)+P\left(M \mid C_2\right) P\left(C_2\right)+P\left(M \mid C_3\right) P\left(C_3\right)}=\frac{1 \cdot \frac{1}{3}}{\frac{1}{2} \cdot \frac{1}{3}+0 \cdot \frac{1}{3}+1 \cdot \frac{1}{3}}=\frac{2}{3}$$

- 若主持人不知道汽车的位置,那么竞猜者无论改变选择与否,获得汽车的概率都为$\frac{1}{2}$
- Monty Hall问题的变形
  - 多扇门的Monty Hally问题
    - 有 $n$ 扇道具门，其中一扇门后置有一辆汽车，其他 $n-1$ 扇门后各置有一头山羊
    - 当至少有三扇门还未打开时，竞猜者选择其中一扇未打开的门，主持人以相同概率打开竞猜者未选择且后面是山羊的门中的任意一扇，并允许竞猜者改变之前的选择。继续上述过程直至只有两扇门还未打开
    - 在游戏进行过程中每次允许竞猜者改变选择时，竞猜者应采取怎样的策略
  - 多扇门、多辆车的Monty Hally间题
    - 有 $n$ 扇道具门，其中 $k$ 扇门后各置有一辆汽车，其他 $n-k$ 扇门后各置有一头山羊
    - 竞猜者选择其中一扇门后，主持人以相同概率打并了其他 $n-1$ 扇门中的 $m$ 扇， $1 \leq m \leq n-2$,其中$j$扇门后各有一辆汽车,$n-j$扇门后各有一头山羊,
    - 主持人允许竞猜者改变之前的选择，竞猜者是否应该改变当前的选择
  - 多扇门、多种奖品的Monty Halli问题
    - 有 $n$ 扇道具门，其中 $n_i$ 扇门后各置有价值为 $v_i$ 的奖品,$i=1, \cdots, m$,竞猜者选择其中一扇门后，主持人以相同概率打开了其他 扇门中的一扇，并允许竞猜者改变之前的选择。竞猜者看到打开的门后的奖品后，是否应该改变当前的选择

## 赠券收集问题
- 一套赠券共$N$种,商家在每个商品中随机放入一张赠券,问集齐全部赠券平均需要购买多少商品
- 设$X$为集齐全部赠券所需购买商品的数量,$Y_k$为从收集$k-1$种赠券到收集$k$种赠券所需购买商品的数量
  - 则$Y_k$服从成功概率为$\frac{N-k+1}{N}$的几何分布
  - $X=Y_1+Y_2+\cdots+Y_N$
  - $E(X)=E(Y_1)+E(Y_2)+\cdots+E(Y_N)$
  - $E(Y_k)=\frac{N}{N-k+1}$
  - $E(X)=N\left(1+\frac{1}{2}+\cdots+\frac{1}{N}\right)=N\sum\limits_{k=1}^N\frac{1}{k},(\approx N\ln N,N\to\infty)$